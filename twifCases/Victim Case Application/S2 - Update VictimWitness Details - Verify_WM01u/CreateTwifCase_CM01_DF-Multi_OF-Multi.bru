meta {
  name: CreateTwifCase_CM01_DF-Multi_OF-Multi
  type: http
  seq: 1
}

post {
  url: https://localhost:7165/api/twif/cm01
  body: json
  auth: inherit
}

body:json {
   {
  	"PreChargeDecisionRequest": {
  		"ItemId": "{{TwifCM01itemId}}",
  		"PTIURN": {
  			"Force": "16",
  			"Unit": "GD",
  			"Number": "{{TwifPTIURNNumber}}",
  			"Year": "25" 
  			},
  		"CPSUnit": { 
  			"TopLevel": "A",
  			"SecondLevel": "16",
  			"ThirdLevel": "AD",
  			"BottomLevel": "00"
  		},
  		"CaseClassification": [
  			{
  				"ClassificationType": "CaseMonitoring",
  				"ClassificationCode": "HonourCrime",
  				"ClassificationValue": {
  					"ClassificationValueFlag": "true"
  				}
  			},
              {
  				"ClassificationType": "CaseMonitoring",
  				"ClassificationCode": "ChildAbuse",
  				"ClassificationValue": {
  					"ClassificationValueFlag": "true"
  				}
  			},
              {
  				"ClassificationType": "CaseMonitoring",
  				"ClassificationCode": "Fatality",
  				"ClassificationValue": {
  					"ClassificationValueFlag": "true"
  				}
  			}			
  		],
  		"Suspect": [
  			{
  				"AccusedPerson": {
  					"UniqueId": "{{TwifDefPersonId1}}",
  					"Name": {
  						"GivenName": "DefOneName",
  						"FamilyName": "DefOneFamilyName"
  					},
  					"DateOfBirth": "1992-09-08",
  					"PoliceRemandStatus": "Custody"
  				},
  				"ASN": {
  					"Year": "25",
  					"Force": "16",
  					"Unit": "GD",
  					"System": "00",
  					"Number": "{{TwifASNNumber1}}",
  					"CheckCharacter": "W"
  				},
  				"ProposedCharge": [
  					{
  						"UniqueID": "{{TwifCaseOffenceId1}}",
  						"CJSCode": 
  							{
  							"Code": {
  								"Alternative": {
  									"ActOrSource": "OF",
  									"Year": "61"
  								},
  								"Reason": "016"
                                }
  							},
  						"Description": "Wound with intent to do grievous bodily harm",
  						"Category": "Either Way",
  						"FromDate": "2001-10-01",
  						"Particulars": {
  							"Address": {
  								"AddressLine": [
  									"DefAddressLine1",
  									"DefAddressLine2",
                                      "DefAddressLine3",
                                      "DefAddressLine4" 
  								],
  								"Postcode": "NE1 1BB",
  								"Country": "UK"
  							}
  						}
  					},
                      {
  						"UniqueID": "{{TwifCaseOffenceId3}}",
  						"CJSCode": 
  							{
  							"Code": {
  								"Alternative": {
  									"ActOrSource": "OF",
  									"Year": "61"
  								},
  								"Reason": "102"
                                }
  							},
  						"Description": "OF 61 102 - Assault a person thereby occasioning them actual bodily harm",
  						"Category": "Either Way",
  						"FromDate": "2001-10-01",
  						"Particulars": {
  							"Address": {
  								"AddressLine": [
  									"AddressLine1",
  									"AddressLine2"
  								],
  								"Postcode": "NE1 1BB",
  								"Country": "UK"
  							}
  						}
  					}
  				]
  			},
  			{
  				"AccusedPerson": {
  					"UniqueId": "{{TwifDefPersonId2}}",
  					"Name": {
  						"GivenName": "DefTwoName",
  						"FamilyName": "DefTwoFamilyName"
  					},
  					"DateOfBirth": "1992-09-08",
  					"PoliceRemandStatus": "Custody"
  				},
  				"ASN": {
  					"Year": "25",
  					"Force": "16",
  					"Unit": "GD",
  					"System": "00",
  					"Number": "{{TwifASNNumber2}}",
  					"CheckCharacter": "W"
  				},
  				"ProposedCharge": [
  					{
  						"UniqueID": "{{TwifCaseOffenceId4}}",
  						"CJSCode": 
  							{
  							"Code": {
  								"Alternative": {
  									"ActOrSource": "OF",
  									"Year": "61"
  								},
  								"Reason": "016"
                                }
  							},
  						"Description": "Wound with intent to do grievous bodily harm",
  						"Category": "Either Way",
  						"FromDate": "2001-10-01",
  						"Particulars": {
  							"Address": {
  								"AddressLine": [
  									"AddressLine1",
  									"AddressLine2"
  								],
  								"Postcode": "NE1 1BB",
  								"Country": "UK"
  							}
  						}
  					},
                      {
  						"UniqueID": "{{TwifCaseOffenceId6}}",
  						"CJSCode": 
  							{
  							"Code": {
  								"Alternative": {
  									"ActOrSource": "OF",
  									"Year": "61"
  								},
  								"Reason": "102"
                                }
  							},
  						"Description": "OF 61 102 - Assault a person thereby occasioning them actual bodily harm",
  						"Category": "Either Way",
  						"FromDate": "2001-10-01",
  						"Particulars": {
  							"Address": {
  								"AddressLine": [
  									"AddressLine1",
  									"AddressLine2"
  								],
  								"Postcode": "NE1 1BB",
  								"Country": "UK"
  							}
  						}
  					}
  				]
  			},
  			{
  				"AccusedPerson": {
  					"UniqueId": "{{TwifDefPersonId3}}",
  					"Name": {
  						"GivenName": "DefThreeName",
  						"FamilyName": "DefThreeName"
  					},
  					"DateOfBirth": "1992-09-08",
  					"PoliceRemandStatus": "Custody"
  				},
  				"ASN": {
  					"Year": "25",
  					"Force": "16",
  					"Unit": "GD",
  					"System": "00",
  					"Number": "{{TwifASNNumber3}}",
  					"CheckCharacter": "W"
  				},
  				"ProposedCharge": [
  					{
  						"UniqueID": "{{TwifCaseOffenceId7}}",
  						"CJSCode": 
  							{
  							"Code": {
  								"Alternative": {
  									"ActOrSource": "OF",
  									"Year": "61"
  								},
  								"Reason": "016"
                                }
  							},
  						"Description": "Wound with intent to do grievous bodily harm",
  						"Category": "Either Way",
  						"FromDate": "2001-10-01",
  						"Particulars": {
  							"Address": {
  								"AddressLine": [
  									"AddressLine1",
  									"AddressLine2"
  								],
  								"Postcode": "NE1 1BB",
  								"Country": "UK"
  							}
  						}
  					},
                      {
  						"UniqueID": "{{TwifCaseOffenceId9}}",
  						"CJSCode": 
  							{
  							"Code": {
  								"Alternative": {
  									"ActOrSource": "OF",
  									"Year": "61"
  								},
  								"Reason": "102"
                                }
  							},
  						"Description": "OF 61 102 - Assault a person thereby occasioning them actual bodily harm",
  						"Category": "Either Way",
  						"FromDate": "2001-10-01",
  						"Particulars": {
  							"Address": {
  								"AddressLine": [
  									"AddressLine1",
  									"AddressLine2"
  								],
  								"Postcode": "NE1 1BB",
  								"Country": "UK"
  							}
  						}
  					}
  				]
  			}
  		],
  		"CaseOutlineItem": {
  			"CaseOutlineHeading": {
  				"ClassificationType": "CaseOutline",
  				"ClassificationCode": "Heading",
  				"ClassificationValue": { 
  					"ClassificationValueText": "KEVD"
  				}
  			},
  			"CaseOutlineText": "Text."
  		},
  		"PCDPoliceContactDetails": {
  			"OfficerCompleting": {
  				"UniqueId": "{{TwifSergeantPersonId}}",
  				"Name": {
  					"GivenName": "Tony",
  					"FamilyName": "Mann"		
  					},
  				"Rank": "PC",
  				"Station": "Guildford",
  				"ShoulderNumber": "{{TwifSergeantShoulderNo}}"
  			},
  			"OfficerSupervising": {
  				"UniqueId": "{{TwifConstablePersonId}}",
  				"Name": {
  					"GivenName": "Rav",
  					"FamilyName":"Shah"	
  					},
  				"Rank": "PC",
  				"Station": "Guildford",
  				"ShoulderNumber": "{{TwifConstableShoulderNo}}",
  				"Narrative": "Comments by Police"
  			}
  		},
  	"PCDRequestDate": "2025-01-01",
          "PCDDecisionRequiredByDate": "2026-10-30",
          "Contact": "Telephone"
  	}
  }
}

script:pre-request {
  function generateFiveDigitNumber() {
      return Math.floor(10000 + Math.random() * 90000);
  }
  
  function generateSevenDigitNumber() {
      return Math.floor(1000000 + Math.random() * 9000000);
  }
  
  function generateElevenDigitNumber() {
      return Math.floor(10000000000 + Math.random() * 90000000000);
  }
  
  function generateUppercaseAlphaNumeric(length) {
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
      let result = '';
      for (let i = 0; i < length; i++) {
          result += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return result;
  }
  
  let twifcm01 = generateUppercaseAlphaNumeric(12);
  
  let twifptiURN = generateFiveDigitNumber();
  
  let twifasnNumber1 = generateElevenDigitNumber();
  let twifasnNumber2 = generateElevenDigitNumber();
  let twifasnNumber3 = generateElevenDigitNumber();
  
  let twifdefPer1 = generateUppercaseAlphaNumeric(12);
  let twifdefPer2 = generateUppercaseAlphaNumeric(12);
  let twifdefPer3 = generateUppercaseAlphaNumeric(12);
  
  let twifcaseOffNum1 = generateUppercaseAlphaNumeric(12);
  let twifcaseOffNum2 = generateUppercaseAlphaNumeric(12);
  let twifcaseOffNum3 = generateUppercaseAlphaNumeric(12);
  let twifcaseOffNum4 = generateUppercaseAlphaNumeric(12);
  let twifcaseOffNum5 = generateUppercaseAlphaNumeric(12);
  let twifcaseOffNum6 = generateUppercaseAlphaNumeric(12);
  let twifcaseOffNum7 = generateUppercaseAlphaNumeric(12);
  let twifcaseOffNum8 = generateUppercaseAlphaNumeric(12);
  let twifcaseOffNum9 = generateUppercaseAlphaNumeric(12);
  
  
  let twifsoliciRef = generateUppercaseAlphaNumeric(12);
  
  let twifSerShoNo = generateUppercaseAlphaNumeric(6);
  let twifSerPerId = generateUppercaseAlphaNumeric(10);
  
  let twifConsShoNo = generateUppercaseAlphaNumeric(6);
  let twifConsPerId = generateUppercaseAlphaNumeric(10);
  
  bru.setGlobalEnvVar("TwifCM01itemId", twifcm01);
  bru.setGlobalEnvVar("TwifPTIURNNumber", twifptiURN);
  
  bru.setGlobalEnvVar("TwifDefPersonId1", twifdefPer1);
  bru.setGlobalEnvVar("TwifDefPersonId2", twifdefPer2);
  bru.setGlobalEnvVar("TwifDefPersonId3", twifdefPer3);
  
  bru.setGlobalEnvVar("TwifASNNumber1", twifasnNumber1);
  bru.setGlobalEnvVar("TwifASNNumber2", twifasnNumber2);
  bru.setGlobalEnvVar("TwifASNNumber3", twifasnNumber3);
  
  bru.setGlobalEnvVar("TwifCaseOffenceId1", twifcaseOffNum1);
  bru.setGlobalEnvVar("TwifCaseOffenceId2", twifcaseOffNum2);
  bru.setGlobalEnvVar("TwifCaseOffenceId3", twifcaseOffNum3);
  bru.setGlobalEnvVar("TwifCaseOffenceId4", twifcaseOffNum4);
  bru.setGlobalEnvVar("TwifCaseOffenceId5", twifcaseOffNum5);
  bru.setGlobalEnvVar("TwifCaseOffenceId6", twifcaseOffNum6);
  bru.setGlobalEnvVar("TwifCaseOffenceId7", twifcaseOffNum7);
  bru.setGlobalEnvVar("TwifCaseOffenceId8", twifcaseOffNum8);
  bru.setGlobalEnvVar("TwifCaseOffenceId9", twifcaseOffNum9);
  
  bru.setGlobalEnvVar("TwifSolicitor", twifsoliciRef);
  
  bru.setGlobalEnvVar("TwifSergeantShoulderNo", twifSerShoNo);
  bru.setGlobalEnvVar("TwifSergeantPersonId", twifSerPerId);
  
  bru.setGlobalEnvVar("TwifConstableShoulderNo", twifConsShoNo);
  bru.setGlobalEnvVar("TwifConstablePersonId", twifConsPerId);
  
  bru.setGlobalEnvVar("TwifCaseUrn", "16GD"+twifptiURN+"25" )
  
  console.log("TwifCaseUrn", "16GD"+twifptiURN+"25");
  
}

settings {
  encodeUrl: true
}

example {
  name: 1 Suspect, Two Proposed Charges
  
  request: {
    url: https://localhost:7165/api/twif/cm01
    method: POST
    mode: json
    body:json: {
      {
          "preChargeDecisionCase": {
              "ptiUrn": {
                  "force": "12",
                  "unit": "12",
                  "number": "87552",
                  "year": "25"
              },
              "cpsUnit": {
                  "topLevel": "A",
                  "secondLevel": "12",
                  "thirdLevel": "AH",
                  "bottomLevel": "00"
              },
              "suspects": [
                  {
                      "accusedPerson": {
                          "name": {
                              "givenName": "John",
                              "familyName": "Doe"
                          }
                      },
                      "arrestSummonsNumber": {
                          "year": "25",
                          "force": "12",
                          "unit": "12",
                          "system": "00",
                          "checkCharacter": "B"
                      },
                      "proposedCharges": [
                          {
                              "cjsCode": {
                                  "literalValue": "CD71039",
                                  "code": {
                                      "alternative": {
                                          "actOrSource": "CD",
                                          "year": "71"
                                      },
                                      "reason": "039"
                                  }
                              },
                              "description": "Criminal damage to property valued under  Â£5000",
                              "category": "Summary Only",
                              "fromDate": "2025-07-03T00:00:00Z",
                              "particulars": {
                                  "address": {
                                      "addressLines": [
                                          "2 Newton Road",
                                          "Newton",
                                          "Surrey"
                                      ],
                                      "postcode": "SM4 4DN",
                                      "country": "UK"
                                  }
                              }
                          },
                          {
                              "cjsCode": {
                                  "literalValue": "RT88026",
                                  "code": {
                                      "alternative": {
                                          "actOrSource": "RT",
                                          "year": "88"
                                      },
                                      "reason": "026"
                                  }
                              },
                              "description": "Drive a motor vehicle dangerously",
                              "category": "Summary Only",
                              "fromDate": "2025-07-03T00:00:00Z",
                              "particulars": {
                                  "address": {
                                      "addressLines": [
                                          "2 Newton Road",
                                          "Newton",
                                          "Surrey"
                                      ],
                                      "postcode": "SM4 4DN",
                                      "country": "UK"
                                  }
                              }
                          }
                      ]
                  }
              ],
              "caseOutlineItems": [
                  {
                      "caseOutlineHeading": {
                          "classificationType": "CaseOutline",
                          "classificationCode": "Heading",
                          "classificationValue": {
                              "classificationValueText": "KEVD"
                          }
                      },
                      "caseOutlineText": "This is a test message generated for the CPS Testing Tool system. The suspects were allegedly involved in theft from a local shop."
                  }
              ],
              "policeContactDetails": {
                  "officerCompleting": {
                      "name": {
                          "givenName": "Test Completing",
                          "familyName": "Officer"
                      }
                  },
                  "officerSupervising": {
                      "name": {
                          "givenName": "Test Supervising",
                          "familyName": "Officer"
                      }
                  }
              },
              "pcdRequestDate": "2025-07-18T00:00:00Z",
              "pcdDecisionRequiredByDate": "2025-07-28T00:00:00Z",
              "contact": "Telephone"
          }
      }
    }
  }
  
  response: {
    headers: {
      Content-Type: application/json; charset=utf-8
      Date: Tue, 22 Jul 2025 16:36:00 GMT
      Server: Kestrel
      Transfer-Encoding: chunked
    }
  
    status: {
      code: OK
      text: 200
    }
  
    body: {
      type: json
      content: '''
        {
            "success": true,
            "message": "Pre-charge decision request processed successfully",
            "requestId": "4513C469",
            "transactionId": "4513C469",
            "correlationId": "32535355",
            "processedAt": "2025-07-22T16:36:01.2997088Z",
            "errors": [],
            "soapResponse": "<?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><SubmitResponseMes xmlns=\"http://schemas.cjse.gov.uk/endpoint/types/\"><RequestID>4513C469</RequestID><ResponseCode>1</ResponseCode><ResponseText /></SubmitResponseMes></soap:Body></soap:Envelope>"
        }
      '''
    }
  }
}

example {
  name: 2 Suspects, each 2 Proposed Charges
  
  request: {
    url: https://localhost:7165/api/twif/cm01
    method: POST
    mode: json
    body:json: {
      {
          "preChargeDecisionCase": {
              "ptiUrn": {
                  "force": "12",
                  "unit": "12",
                  "number": "97552",
                  "year": "25"
              },
              "cpsUnit": {
                  "topLevel": "A",
                  "secondLevel": "12",
                  "thirdLevel": "AH",
                  "bottomLevel": "00"
              },
              "suspects": [
                  {
                      "accusedPerson": {
                          "name": {
                              "givenName": "John",
                              "familyName": "Doe"
                          }
                      },
                      "arrestSummonsNumber": {
                          "year": "25",
                          "force": "12",
                          "unit": "12",
                          "system": "00",
                          "checkCharacter": "B"
                      },
                      "proposedCharges": [
                          {
                              "cjsCode": {
                                  "literalValue": "CD71039",
                                  "code": {
                                      "alternative": {
                                          "actOrSource": "CD",
                                          "year": "71"
                                      },
                                      "reason": "039"
                                  }
                              },
                              "description": "Criminal damage to property valued under  Â£5000",
                              "category": "Summary Only",
                              "fromDate": "2025-07-03T00:00:00Z",
                              "particulars": {
                                  "address": {
                                      "addressLines": [
                                          "2 Newton Road",
                                          "Newton",
                                          "Surrey"
                                      ],
                                      "postcode": "SM4 4DN",
                                      "country": "UK"
                                  }
                              }
                          },
                          {
                              "cjsCode": {
                                  "literalValue": "RT88026",
                                  "code": {
                                      "alternative": {
                                          "actOrSource": "RT",
                                          "year": "88"
                                      },
                                      "reason": "026"
                                  }
                              },
                              "description": "Drive a motor vehicle dangerously",
                              "category": "Summary Only",
                              "fromDate": "2025-07-03T00:00:00Z",
                              "particulars": {
                                  "address": {
                                      "addressLines": [
                                          "2 Newton Road",
                                          "Newton",
                                          "Surrey"
                                      ],
                                      "postcode": "SM4 4DN",
                                      "country": "UK"
                                  }
                              }
                          }
                      ]
                  },
                  {
                      "accusedPerson": {
                          "name": {
                              "givenName": "Jess",
                              "familyName": "Doe"
                          }
                      },
                      "arrestSummonsNumber": {
                          "year": "25",
                          "force": "12",
                          "unit": "13",
                          "system": "00",
                          "checkCharacter": "B"
                      },
                      "proposedCharges": [
                          {
                              "cjsCode": {
                                  "literalValue": "CD71039",
                                  "code": {
                                      "alternative": {
                                          "actOrSource": "CD",
                                          "year": "71"
                                      },
                                      "reason": "039"
                                  }
                              },
                              "description": "Criminal damage to property valued under  Â£5000",
                              "category": "Summary Only",
                              "fromDate": "2025-07-03T00:00:00Z",
                              "particulars": {
                                  "address": {
                                      "addressLines": [
                                          "2 Newton Road",
                                          "Newton",
                                          "Surrey"
                                      ],
                                      "postcode": "SM4 4DN",
                                      "country": "UK"
                                  }
                              }
                          },
                          {
                              "cjsCode": {
                                  "literalValue": "RT88026",
                                  "code": {
                                      "alternative": {
                                          "actOrSource": "RT",
                                          "year": "88"
                                      },
                                      "reason": "026"
                                  }
                              },
                              "description": "Drive a motor vehicle dangerously",
                              "category": "Summary Only",
                              "fromDate": "2025-07-03T00:00:00Z",
                              "particulars": {
                                  "address": {
                                      "addressLines": [
                                          "2 Newton Road",
                                          "Newton",
                                          "Surrey"
                                      ],
                                      "postcode": "SM4 4DN",
                                      "country": "UK"
                                  }
                              }
                          }
                      ]
                  }
              ],
              "caseOutlineItems": [
                  {
                      "caseOutlineHeading": {
                          "classificationType": "CaseOutline",
                          "classificationCode": "Heading",
                          "classificationValue": {
                              "classificationValueText": "KEVD"
                          }
                      },
                      "caseOutlineText": "This is a test message generated for the CPS Testing Tool system. The suspects were allegedly involved in theft from a local shop."
                  }
              ],
              "policeContactDetails": {
                  "officerCompleting": {
                      "name": {
                          "givenName": "Test Completing",
                          "familyName": "Officer"
                      }
                  },
                  "officerSupervising": {
                      "name": {
                          "givenName": "Test Supervising",
                          "familyName": "Officer"
                      }
                  }
              },
              "pcdRequestDate": "2025-07-18T00:00:00Z",
              "pcdDecisionRequiredByDate": "2025-07-28T00:00:00Z",
              "contact": "Telephone"
          }
      }
    }
  }
  
  response: {
    headers: {
      Content-Type: application/json; charset=utf-8
      Date: Thu, 24 Jul 2025 18:04:55 GMT
      Server: Kestrel
      Transfer-Encoding: chunked
    }
  
    status: {
      code: OK
      text: 200
    }
  
    body: {
      type: json
      content: '''
        {
            "success": true,
            "message": "Pre-charge decision request processed successfully",
            "requestId": "098B11C1",
            "transactionId": "098B11C1",
            "correlationId": "76529309",
            "processedAt": "2025-07-24T18:04:55.308434Z",
            "errors": [],
            "soapResponse": "<?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><SubmitResponseMes xmlns=\"http://schemas.cjse.gov.uk/endpoint/types/\"><RequestID>098B11C1</RequestID><ResponseCode>1</ResponseCode><ResponseText /></SubmitResponseMes></soap:Body></soap:Envelope>"
        }
      '''
    }
  }
}

example {
  name: Priority Case
  
  request: {
    url: https://localhost:7165/api/twif/cm01
    method: POST
    mode: json
    body:json: {
      {
          "preChargeDecisionCase": {
              "ptiUrn": {
                  "force": "05",
                  "unit": "E5",
                  "number": "07243",
                  "year": "26"
              },
              "cpsUnit": {
                  "topLevel": "A",
                  "secondLevel": "05",
                  "thirdLevel": "AQ",
                  "bottomLevel": "00"
              },
              "suspects": [
                  {
                      "accusedPerson": {
                          "name": {
                              "givenName": "John",
                              "familyName": "Doe"
                          },
                          "policeRemandStatus": "Custody"
                      },
                      "arrestSummonsNumber": {
                          "year": "25",
                          "force": "12",
                          "unit": "12",
                          "system": "00",
                          "checkCharacter": "B"
                      },
                      "proposedCharges": [
                          {
                              "cjsCode": {
                                  "literalValue": "CD71039",
                                  "code": {
                                      "alternative": {
                                          "actOrSource": "CD",
                                          "year": "71"
                                      },
                                      "reason": "039"
                                  }
                              },
                              "description": "Criminal damage to property valued under  Â£5000",
                              "category": "Summary Only",
                              "fromDate": "2025-07-03T00:00:00Z",
                              "particulars": {
                                  "address": {
                                      "addressLines": [
                                          "2 Newton Road",
                                          "Newton",
                                          "Surrey"
                                      ],
                                      "postcode": "SM4 4DN",
                                      "country": "UK"
                                  }
                              }
                          },
                          {
                              "cjsCode": {
                                  "literalValue": "RT88026",
                                  "code": {
                                      "alternative": {
                                          "actOrSource": "RT",
                                          "year": "88"
                                      },
                                      "reason": "026"
                                  }
                              },
                              "description": "Drive a motor vehicle dangerously",
                              "category": "Summary Only",
                              "fromDate": "2025-07-03T00:00:00Z",
                              "particulars": {
                                  "address": {
                                      "addressLines": [
                                          "2 Newton Road",
                                          "Newton",
                                          "Surrey"
                                      ],
                                      "postcode": "SM4 4DN",
                                      "country": "UK"
                                  }
                              }
                          }
                      ]
                  }
              ],
              "caseOutlineItems": [
                  {
                      "caseOutlineHeading": {
                          "classificationType": "CaseOutline",
                          "classificationCode": "Heading",
                          "classificationValue": {
                              "classificationValueText": "KEVD"
                          }
                      },
                      "caseOutlineText": "This is a test message generated for the CPS Testing Tool system. The suspects were allegedly involved in theft from a local shop."
                  }
              ],
              "policeContactDetails": {
                  "officerCompleting": {
                      "name": {
                          "givenName": "Test Completing",
                          "familyName": "Officer"
                      }
                  },
                  "officerSupervising": {
                      "name": {
                          "givenName": "Test Supervising",
                          "familyName": "Officer"
                      }
                  }
              },
              "pcdRequestDate": "2025-07-18T00:00:00Z",
              "pcdDecisionRequiredByDate": "2025-07-28T00:00:00Z",
              "contact": "Telephone"
          }
      }
    }
  }
  
  response: {
    headers: {
      Content-Type: application/json; charset=utf-8
      Date: Thu, 24 Jul 2025 17:45:27 GMT
      Server: Kestrel
      Transfer-Encoding: chunked
    }
  
    status: {
      code: OK
      text: 200
    }
  
    body: {
      type: json
      content: '''
        {
            "success": true,
            "message": "Pre-charge decision request processed successfully",
            "requestId": "5ABCB5DB",
            "transactionId": "5ABCB5DB",
            "correlationId": "67085485",
            "processedAt": "2025-07-24T17:45:28.9350868Z",
            "errors": [],
            "soapResponse": "<?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><SubmitResponseMes xmlns=\"http://schemas.cjse.gov.uk/endpoint/types/\"><RequestID>5ABCB5DB</RequestID><ResponseCode>1</ResponseCode><ResponseText /></SubmitResponseMes></soap:Body></soap:Envelope>"
        }
      '''
    }
  }
}

example {
  name: Example Validation Error
  
  request: {
    url: https://localhost:7165/api/twif/cm01
    method: POST
    mode: json
    body:json: {
      {
          "preChargeDecisionCase": {
              "ptiUrn": {
                  "unit": "12",
                  "number": "97552",
                  "year": "25"
              },
              "cpsUnit": {
                  "topLevel": "A",
                  "secondLevel": "12",
                  "thirdLevel": "AH",
                  "bottomLevel": "00"
              },
              "suspects": [
                  {
                      "accusedPerson": {
                          "name": {
                              "givenName": "John",
                              "familyName": "Doe"
                          }
                      },
                      "arrestSummonsNumber": {
                          "year": "25",
                          "force": "12",
                          "unit": "12",
                          "system": "00",
                          "checkCharacter": "B"
                      },
                      "proposedCharges": [
                          {
                              "cjsCode": {
                                  "literalValue": "CD71039",
                                  "code": {
                                      "alternative": {
                                          "actOrSource": "CD",
                                          "year": "71"
                                      },
                                      "reason": "039"
                                  }
                              },
                              "description": "Criminal damage to property valued under  Â£5000",
                              "category": "Summary Only",
                              "fromDate": "2025-07-03T00:00:00Z",
                              "particulars": {
                                  "address": {
                                      "addressLines": [
                                          "2 Newton Road",
                                          "Newton",
                                          "Surrey"
                                      ],
                                      "postcode": "SM4 4DN",
                                      "country": "UK"
                                  }
                              }
                          },
                          {
                              "cjsCode": {
                                  "literalValue": "RT88026",
                                  "code": {
                                      "alternative": {
                                          "actOrSource": "RT",
                                          "year": "88"
                                      },
                                      "reason": "026"
                                  }
                              },
                              "description": "Drive a motor vehicle dangerously",
                              "category": "Summary Only",
                              "fromDate": "2025-07-03T00:00:00Z",
                              "particulars": {
                                  "address": {
                                      "addressLines": [
                                          "2 Newton Road",
                                          "Newton",
                                          "Surrey"
                                      ],
                                      "postcode": "SM4 4DN",
                                      "country": "UK"
                                  }
                              }
                          }
                      ]
                  },
                  {
                      "accusedPerson": {
                          "name": {
                              "givenName": "Jess",
                              "familyName": "Doe"
                          }
                      },
                      "arrestSummonsNumber": {
                          "year": "25",
                          "force": "12",
                          "unit": "13",
                          "system": "00",
                          "checkCharacter": "B"
                      },
                      "proposedCharges": [
                          {
                              "cjsCode": {
                                  "literalValue": "CD71039",
                                  "code": {
                                      "alternative": {
                                          "actOrSource": "CD",
                                          "year": "71"
                                      },
                                      "reason": "039"
                                  }
                              },
                              "description": "Criminal damage to property valued under  Â£5000",
                              "category": "Summary Only",
                              "fromDate": "2025-07-03T00:00:00Z",
                              "particulars": {
                                  "address": {
                                      "addressLines": [
                                          "2 Newton Road",
                                          "Newton",
                                          "Surrey"
                                      ],
                                      "postcode": "SM4 4DN",
                                      "country": "UK"
                                  }
                              }
                          },
                          {
                              "cjsCode": {
                                  "literalValue": "RT88026",
                                  "code": {
                                      "alternative": {
                                          "actOrSource": "RT",
                                          "year": "88"
                                      },
                                      "reason": "026"
                                  }
                              },
                              "description": "Drive a motor vehicle dangerously",
                              "category": "Summary Only",
                              "fromDate": "2025-07-03T00:00:00Z",
                              "particulars": {
                                  "address": {
                                      "addressLines": [
                                          "2 Newton Road",
                                          "Newton",
                                          "Surrey"
                                      ],
                                      "postcode": "SM4 4DN",
                                      "country": "UK"
                                  }
                              }
                          }
                      ]
                  }
              ],
              "caseOutlineItems": [
                  {
                      "caseOutlineHeading": {
                          "classificationType": "CaseOutline",
                          "classificationCode": "Heading",
                          "classificationValue": {
                              "classificationValueText": "KEVD"
                          }
                      },
                      "caseOutlineText": "This is a test message generated for the CPS Testing Tool system. The suspects were allegedly involved in theft from a local shop."
                  }
              ],
              "policeContactDetails": {
                  "officerCompleting": {
                      "name": {
                          "givenName": "Test Completing",
                          "familyName": "Officer"
                      }
                  },
                  "officerSupervising": {
                      "name": {
                          "givenName": "Test Supervising",
                          "familyName": "Officer"
                      }
                  }
              },
              "pcdRequestDate": "2025-07-18T00:00:00Z",
              "pcdDecisionRequiredByDate": "2025-07-28T00:00:00Z",
              "contact": "Telephone"
          }
      }
    }
  }
  
  response: {
    headers: {
      Content-Type: application/problem+json; charset=utf-8
      Date: Thu, 24 Jul 2025 18:06:00 GMT
      Server: Kestrel
      Transfer-Encoding: chunked
    }
  
    status: {
      code: Bad Request
      text: 400
    }
  
    body: {
      type: text
      content: '''
        {
            "type": "https://www.rfc-editor.org/rfc/rfc7231#section-6.5.1",
            "title": "Bad Request",
            "status": 400,
            "instance": "/api/twif/cm01",
            "traceId": "0HNEAR7AM6E7C:00000001",
            "errors": [
                {
                    "name": "preChargeDecisionCase.ptiUrn.force",
                    "reason": "Force is required"
                }
            ]
        }
      '''
    }
  }
}
